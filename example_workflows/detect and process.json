{
  "id": "eec69fa3-1cf4-4a07-a47a-841cc9cce2f1",
  "revision": 0,
  "last_node_id": 222,
  "last_link_id": 365,
  "nodes": [
    {
      "id": 49,
      "type": "Note",
      "pos": [
        174.98699951171875,
        533.8548583984375
      ],
      "size": [
        305.2722473144531,
        140.4160614013672
      ],
      "flags": {},
      "order": 0,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "properties": {
        "widget_ue_connectable": {}
      },
      "widgets_values": [
        "此处用于切换图像加载方式。\ntrue：单张图像\nfalse：文件夹路径所有图像（也可以指定范围，改一下加载上限与起始索引即可）"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 48,
      "type": "Switch image [Crystools]",
      "pos": [
        168.9799346923828,
        379.4907531738281
      ],
      "size": [
        315,
        78
      ],
      "flags": {},
      "order": 13,
      "mode": 0,
      "inputs": [
        {
          "label": "真",
          "name": "on_true",
          "type": "IMAGE",
          "link": 42
        },
        {
          "label": "假",
          "name": "on_false",
          "type": "IMAGE",
          "link": 43
        }
      ],
      "outputs": [
        {
          "label": "图像",
          "name": "image",
          "type": "IMAGE",
          "slot_index": 0,
          "links": [
            44
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "Switch image [Crystools]",
        "cnr_id": "comfyui-crystools",
        "ver": "72e2e9af4a6b9a58ca5d753cacff37ba1ff9bfa8",
        "widget_ue_connectable": {}
      },
      "widgets_values": [
        false
      ],
      "color": "#232",
      "bgcolor": "#353",
      "shape": 1
    },
    {
      "id": 185,
      "type": "Mask Dilate Region",
      "pos": [
        749.2394409179688,
        71.4133529663086
      ],
      "size": [
        210,
        58
      ],
      "flags": {},
      "order": 18,
      "mode": 0,
      "inputs": [
        {
          "label": "遮罩",
          "name": "masks",
          "type": "MASK",
          "link": 355
        }
      ],
      "outputs": [
        {
          "label": "遮罩",
          "name": "MASKS",
          "type": "MASK",
          "links": [
            356
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "Mask Dilate Region",
        "widget_ue_connectable": {
          "iterations": true
        }
      },
      "widgets_values": [
        5
      ]
    },
    {
      "id": 203,
      "type": "MaskPreview+",
      "pos": [
        1783.298828125,
        -247.35198974609375
      ],
      "size": [
        338.7093200683594,
        280.49212646484375
      ],
      "flags": {},
      "order": 17,
      "mode": 0,
      "inputs": [
        {
          "label": "遮罩",
          "name": "mask",
          "type": "MASK",
          "link": 345
        }
      ],
      "outputs": [],
      "title": "all遮罩处理前",
      "properties": {
        "Node name for S&R": "MaskPreview+",
        "widget_ue_connectable": {}
      },
      "widgets_values": []
    },
    {
      "id": 208,
      "type": "MaskPreview+",
      "pos": [
        2125.168212890625,
        -245.31378173828125
      ],
      "size": [
        335.853515625,
        278.7785949707031
      ],
      "flags": {},
      "order": 23,
      "mode": 0,
      "inputs": [
        {
          "label": "遮罩",
          "name": "mask",
          "type": "MASK",
          "link": 349
        }
      ],
      "outputs": [],
      "title": "all遮罩处理后",
      "properties": {
        "Node name for S&R": "MaskPreview+",
        "widget_ue_connectable": {}
      },
      "widgets_values": []
    },
    {
      "id": 46,
      "type": "PreviewImage",
      "pos": [
        2474.79638671875,
        133.42604064941406
      ],
      "size": [
        597.1818237304688,
        556.2698974609375
      ],
      "flags": {},
      "order": 26,
      "mode": 4,
      "inputs": [
        {
          "label": "图像",
          "name": "images",
          "type": "IMAGE",
          "link": 38
        }
      ],
      "outputs": [],
      "properties": {
        "Node name for S&R": "PreviewImage",
        "cnr_id": "comfy-core",
        "ver": "0.3.15",
        "widget_ue_connectable": {}
      },
      "widgets_values": [],
      "color": "#322",
      "bgcolor": "#533",
      "shape": 1
    },
    {
      "id": 32,
      "type": "PreviewImage",
      "pos": [
        1452.1226806640625,
        113.32115936279297
      ],
      "size": [
        1000.0231323242188,
        259.181640625
      ],
      "flags": {},
      "order": 11,
      "mode": 0,
      "inputs": [
        {
          "label": "图像",
          "name": "images",
          "type": "IMAGE",
          "link": 361
        }
      ],
      "outputs": [],
      "title": "原图",
      "properties": {
        "Node name for S&R": "PreviewImage",
        "cnr_id": "comfy-core",
        "ver": "0.3.15",
        "widget_ue_connectable": {}
      },
      "widgets_values": [],
      "color": "#322",
      "bgcolor": "#533",
      "shape": 1
    },
    {
      "id": 41,
      "type": "PreviewImage",
      "pos": [
        1457.9249267578125,
        418.4962463378906
      ],
      "size": [
        994.0755615234375,
        259.2804870605469
      ],
      "flags": {},
      "order": 14,
      "mode": 0,
      "inputs": [
        {
          "label": "图像",
          "name": "images",
          "type": "IMAGE",
          "link": 365
        }
      ],
      "outputs": [],
      "title": "yolo识别",
      "properties": {
        "Node name for S&R": "PreviewImage",
        "cnr_id": "comfy-core",
        "ver": "0.3.15",
        "widget_ue_connectable": {}
      },
      "widgets_values": [],
      "color": "#322",
      "bgcolor": "#533",
      "shape": 1
    },
    {
      "id": 200,
      "type": "PreviewImage",
      "pos": [
        1460.165283203125,
        733.4965209960938
      ],
      "size": [
        990.0353393554688,
        264.6678771972656
      ],
      "flags": {},
      "order": 12,
      "mode": 0,
      "inputs": [
        {
          "label": "图像",
          "name": "images",
          "type": "IMAGE",
          "link": 363
        }
      ],
      "outputs": [],
      "title": "模糊处理",
      "properties": {
        "Node name for S&R": "PreviewImage",
        "cnr_id": "comfy-core",
        "ver": "0.3.15",
        "widget_ue_connectable": {}
      },
      "widgets_values": [],
      "color": "#322",
      "bgcolor": "#533",
      "shape": 1
    },
    {
      "id": 50,
      "type": "Note",
      "pos": [
        991.3756713867188,
        -450.2333984375
      ],
      "size": [
        418.6018371582031,
        125.2380142211914
      ],
      "flags": {},
      "order": 1,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "properties": {
        "widget_ue_connectable": {}
      },
      "widgets_values": [
        "此处用于控制模糊的程度范围是0到255."
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 43,
      "type": "LoadImagesFromDir //Inspire",
      "pos": [
        -189.29380798339844,
        526.984130859375
      ],
      "size": [
        315,
        170
      ],
      "flags": {},
      "order": 2,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "label": "图像",
          "name": "IMAGE",
          "type": "IMAGE",
          "slot_index": 0,
          "links": [
            43
          ]
        },
        {
          "label": "遮罩",
          "name": "MASK",
          "type": "MASK",
          "links": null
        },
        {
          "label": "整数",
          "name": "INT",
          "type": "INT",
          "links": null
        }
      ],
      "properties": {
        "Node name for S&R": "LoadImagesFromDir //Inspire",
        "cnr_id": "comfyui-inspire-pack",
        "ver": "ecf8ab6f588bc8442ff7720b383d085ecabbc407",
        "widget_ue_connectable": {}
      },
      "widgets_values": [
        "E:\\AI\\Comfyui_new\\ComfyUI\\output\\test\\2",
        2048,
        0,
        false
      ],
      "color": "#232",
      "bgcolor": "#353",
      "shape": 1
    },
    {
      "id": 45,
      "type": "ImageAndMaskPreview",
      "pos": [
        2760.977783203125,
        -186.32730102539062
      ],
      "size": [
        305.29010009765625,
        272.3148193359375
      ],
      "flags": {},
      "order": 24,
      "mode": 4,
      "inputs": [
        {
          "label": "图像",
          "name": "image",
          "shape": 7,
          "type": "IMAGE",
          "link": 359
        },
        {
          "label": "遮罩",
          "name": "mask",
          "shape": 7,
          "type": "MASK",
          "link": 354
        }
      ],
      "outputs": [
        {
          "label": "图像",
          "name": "composite",
          "type": "IMAGE",
          "links": [
            38
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "ImageAndMaskPreview",
        "cnr_id": "comfyui-kjnodes",
        "ver": "f3d931a630e01821fc1375c9aa24401ab2852347",
        "widget_ue_connectable": {}
      },
      "widgets_values": [
        0.8000000000000002,
        "0,255,0",
        true
      ],
      "color": "#223",
      "bgcolor": "#335",
      "shape": 1
    },
    {
      "id": 215,
      "type": "GetNode",
      "pos": [
        2520.977783203125,
        -186.32730102539062
      ],
      "size": [
        210,
        60
      ],
      "flags": {},
      "order": 3,
      "mode": 4,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            359
          ]
        }
      ],
      "title": "Get_origin",
      "properties": {
        "widget_ue_connectable": {}
      },
      "widgets_values": [
        "origin"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 213,
      "type": "GetNode",
      "pos": [
        746.4775390625,
        -238.9573974609375
      ],
      "size": [
        210,
        60
      ],
      "flags": {},
      "order": 4,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            358
          ]
        }
      ],
      "title": "Get_origin",
      "properties": {
        "widget_ue_connectable": {}
      },
      "widgets_values": [
        "origin"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 216,
      "type": "GetNode",
      "pos": [
        7.291839599609375,
        -225.67848205566406
      ],
      "size": [
        210,
        58
      ],
      "flags": {},
      "order": 5,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            360
          ]
        }
      ],
      "title": "Get_origin",
      "properties": {
        "widget_ue_connectable": {}
      },
      "widgets_values": [
        "origin"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 44,
      "type": "easy imageBatchToImageList",
      "pos": [
        497.3800048828125,
        383.1960754394531
      ],
      "size": [
        210,
        26
      ],
      "flags": {},
      "order": 19,
      "mode": 0,
      "inputs": [
        {
          "label": "图像",
          "name": "image",
          "type": "IMAGE",
          "link": 44
        }
      ],
      "outputs": [
        {
          "label": "图像",
          "name": "IMAGE",
          "shape": 6,
          "type": "IMAGE",
          "slot_index": 0,
          "links": [
            357
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "easy imageBatchToImageList",
        "cnr_id": "comfyui-easy-use",
        "ver": "aadbb0b38945eba3e15be6099a7f4e5c0327c175",
        "widget_ue_connectable": {}
      },
      "widgets_values": [],
      "color": "#232",
      "bgcolor": "#353",
      "shape": 1
    },
    {
      "id": 212,
      "type": "SetNode",
      "pos": [
        493.6109313964844,
        452.1873779296875
      ],
      "size": [
        210,
        60
      ],
      "flags": {},
      "order": 21,
      "mode": 0,
      "inputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "link": 357
        }
      ],
      "outputs": [
        {
          "label": "输出",
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_origin",
      "properties": {
        "previousName": "origin",
        "widget_ue_connectable": {}
      },
      "widgets_values": [
        "origin"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 217,
      "type": "GetNode",
      "pos": [
        1212.3387451171875,
        191.02880859375
      ],
      "size": [
        210,
        58
      ],
      "flags": {},
      "order": 6,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            361
          ]
        }
      ],
      "title": "Get_origin",
      "properties": {
        "widget_ue_connectable": {}
      },
      "widgets_values": [
        "origin"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 199,
      "type": "MaskedImageEffects",
      "pos": [
        986.4775390625,
        -238.9573974609375
      ],
      "size": [
        428.4000244140625,
        174
      ],
      "flags": {},
      "order": 22,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 358
        },
        {
          "name": "mask",
          "type": "MASK",
          "link": 316
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            362
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "MaskedImageEffects",
        "widget_ue_connectable": {}
      },
      "widgets_values": [
        "mosaic",
        "masked_area",
        15,
        25,
        5
      ]
    },
    {
      "id": 218,
      "type": "SetNode",
      "pos": [
        1432.9190673828125,
        -355.7826232910156
      ],
      "size": [
        210,
        60
      ],
      "flags": {},
      "order": 25,
      "mode": 0,
      "inputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "link": 362
        }
      ],
      "outputs": [
        {
          "label": "输出",
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_processed",
      "properties": {
        "previousName": "processed",
        "widget_ue_connectable": {}
      },
      "widgets_values": [
        "processed"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 220,
      "type": "SetNode",
      "pos": [
        746.2109985351562,
        -121.94966888427734
      ],
      "size": [
        210,
        60
      ],
      "flags": {},
      "order": 15,
      "mode": 0,
      "inputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "link": 364
        }
      ],
      "outputs": [
        {
          "label": "输出",
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_detected",
      "properties": {
        "previousName": "detected",
        "widget_ue_connectable": {}
      },
      "widgets_values": [
        "detected"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 187,
      "type": "Mask Gaussian Region",
      "pos": [
        988.8792724609375,
        72.87080383300781
      ],
      "size": [
        210,
        58
      ],
      "flags": {},
      "order": 20,
      "mode": 0,
      "inputs": [
        {
          "label": "遮罩",
          "name": "masks",
          "type": "MASK",
          "link": 356
        }
      ],
      "outputs": [
        {
          "label": "遮罩",
          "name": "MASKS",
          "type": "MASK",
          "links": [
            316,
            349,
            354
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "Mask Gaussian Region",
        "widget_ue_connectable": {
          "radius": true
        }
      },
      "widgets_values": [
        1
      ]
    },
    {
      "id": 219,
      "type": "GetNode",
      "pos": [
        1211.88623046875,
        736.2562866210938
      ],
      "size": [
        210,
        60
      ],
      "flags": {},
      "order": 7,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            363
          ]
        }
      ],
      "title": "Get_processed",
      "properties": {
        "widget_ue_connectable": {}
      },
      "widgets_values": [
        "processed"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 17,
      "type": "LoadImage",
      "pos": [
        -191.04177856445312,
        159.80609130859375
      ],
      "size": [
        315,
        314
      ],
      "flags": {},
      "order": 8,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "label": "图像",
          "name": "IMAGE",
          "type": "IMAGE",
          "slot_index": 0,
          "links": [
            42
          ]
        },
        {
          "label": "遮罩",
          "name": "MASK",
          "type": "MASK",
          "links": null
        }
      ],
      "properties": {
        "Node name for S&R": "LoadImage",
        "cnr_id": "comfy-core",
        "ver": "0.3.15",
        "widget_ue_connectable": {}
      },
      "widgets_values": [
        "2025-03-30-125656_waiNsfwBranchRouwei_ePred1_431883200310523_431883200310524.png",
        "image"
      ],
      "color": "#232",
      "bgcolor": "#353",
      "shape": 1
    },
    {
      "id": 222,
      "type": "GetNode",
      "pos": [
        1207.80615234375,
        418.4961242675781
      ],
      "size": [
        210,
        60
      ],
      "flags": {},
      "order": 9,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            365
          ]
        }
      ],
      "title": "Get_detected",
      "properties": {
        "widget_ue_connectable": {}
      },
      "widgets_values": [
        "detected"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 207,
      "type": "YoloDetectionAndSegmentation",
      "pos": [
        267.8133850097656,
        -232.33570861816406
      ],
      "size": [
        430,
        262
      ],
      "flags": {},
      "order": 10,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 360
        }
      ],
      "outputs": [
        {
          "name": "PLOTTED_IMAGE",
          "type": "IMAGE",
          "links": [
            364
          ]
        },
        {
          "name": "SINGLE_COMBINED_MASK",
          "type": "MASK",
          "links": [
            344
          ]
        },
        {
          "name": "ALL_INDIVIDUAL_MASKS",
          "type": "MASK",
          "links": [
            345,
            355
          ]
        },
        {
          "name": "DETECTIONS_JSON",
          "type": "JSON",
          "links": null
        }
      ],
      "properties": {
        "Node name for S&R": "YoloDetectionAndSegmentation",
        "widget_ue_connectable": {
          "model_name": true,
          "confidence_threshold": true,
          "filter_single_mask_by_class_id": true,
          "use_class_name_for_single_mask": true,
          "class_name_for_single_mask": true,
          "smooth_masks": true,
          "smooth_sigma": true
        }
      },
      "widgets_values": [
        "deepfashion2_yolov8s-seg.pt",
        0.5000000000000001,
        0,
        false,
        "",
        false,
        1
      ]
    },
    {
      "id": 202,
      "type": "MaskPreview+",
      "pos": [
        1434.76513671875,
        -244.74655151367188
      ],
      "size": [
        343.2335510253906,
        275.4845275878906
      ],
      "flags": {},
      "order": 16,
      "mode": 0,
      "inputs": [
        {
          "label": "遮罩",
          "name": "mask",
          "type": "MASK",
          "link": 344
        }
      ],
      "outputs": [],
      "title": "single遮罩处理前",
      "properties": {
        "Node name for S&R": "MaskPreview+",
        "widget_ue_connectable": {}
      },
      "widgets_values": []
    }
  ],
  "links": [
    [
      38,
      45,
      0,
      46,
      0,
      "IMAGE"
    ],
    [
      42,
      17,
      0,
      48,
      0,
      "IMAGE"
    ],
    [
      43,
      43,
      0,
      48,
      1,
      "IMAGE"
    ],
    [
      44,
      48,
      0,
      44,
      0,
      "IMAGE"
    ],
    [
      316,
      187,
      0,
      199,
      1,
      "MASK"
    ],
    [
      344,
      207,
      1,
      202,
      0,
      "MASK"
    ],
    [
      345,
      207,
      2,
      203,
      0,
      "MASK"
    ],
    [
      349,
      187,
      0,
      208,
      0,
      "MASK"
    ],
    [
      354,
      187,
      0,
      45,
      1,
      "MASK"
    ],
    [
      355,
      207,
      2,
      185,
      0,
      "MASK"
    ],
    [
      356,
      185,
      0,
      187,
      0,
      "MASK"
    ],
    [
      357,
      44,
      0,
      212,
      0,
      "*"
    ],
    [
      358,
      213,
      0,
      199,
      0,
      "IMAGE"
    ],
    [
      359,
      215,
      0,
      45,
      0,
      "IMAGE"
    ],
    [
      360,
      216,
      0,
      207,
      0,
      "IMAGE"
    ],
    [
      361,
      217,
      0,
      32,
      0,
      "IMAGE"
    ],
    [
      362,
      199,
      0,
      218,
      0,
      "*"
    ],
    [
      363,
      219,
      0,
      200,
      0,
      "IMAGE"
    ],
    [
      364,
      207,
      0,
      220,
      0,
      "*"
    ],
    [
      365,
      222,
      0,
      41,
      0,
      "IMAGE"
    ]
  ],
  "groups": [
    {
      "id": 1,
      "title": "混合预览",
      "bounding": [
        2466.220947265625,
        -268.15887451171875,
        617.181884765625,
        968.2505493164062
      ],
      "color": "#3f789e",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 2,
      "title": "对比",
      "bounding": [
        1442.1226806640625,
        39.721107482910156,
        1012.6902465820312,
        975.1768188476562
      ],
      "color": "#3f789e",
      "font_size": 24,
      "flags": {}
    }
  ],
  "config": {},
  "extra": {
    "ds": {
      "scale": 0.4950000000000344,
      "offset": [
        372.13005400212927,
        331.47736395469946
      ]
    },
    "ue_links": [],
    "links_added_by_ue": [],
    "frontendVersion": "1.17.11",
    "VHS_latentpreview": false,
    "VHS_latentpreviewrate": 0,
    "VHS_MetadataImage": true,
    "VHS_KeepIntermediate": true
  },
  "version": 0.4
}